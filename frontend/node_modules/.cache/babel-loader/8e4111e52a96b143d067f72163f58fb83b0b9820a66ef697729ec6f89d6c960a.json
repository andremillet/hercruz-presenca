{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CheckIns=()=>{const[attendances,setAttendances]=useState([]);const[message,setMessage]=useState('');const[userAttendances,setUserAttendances]=useState([]);useEffect(()=>{const fetchAttendances=async()=>{const userId=localStorage.getItem('user_id');try{const response=await api.get('/attendance');// Show all attendances for today\nconst today=new Date().toISOString().split('T')[0];const todayAttendances=response.data.filter(a=>a.check_in&&a.check_in.startsWith(today));setAttendances(todayAttendances);const userTodayAttendances=todayAttendances.filter(a=>a.user_id==userId);setUserAttendances(userTodayAttendances);}catch(error){setMessage('Failed to load attendances');}};fetchAttendances();},[]);const handleCheckIn=async()=>{const userId=localStorage.getItem('user_id');// Assume default shift id 1\ntry{await api.post('/attendance/checkin',{user_id:userId,shift_id:1});setMessage('Check-in registrado!');refreshAttendances();}catch(error){setMessage('Erro ao registrar check-in');}};const handleCheckOut=async attendanceId=>{try{await api.post('/attendance/checkout',{attendance_id:attendanceId});setMessage('Check-out registrado!');refreshAttendances();}catch(error){setMessage('Erro ao registrar check-out');}};const refreshAttendances=async()=>{const userId=localStorage.getItem('user_id');try{const response=await api.get('/attendance');const today=new Date().toISOString().split('T')[0];const todayAttendances=response.data.filter(a=>a.check_in&&a.check_in.startsWith(today));setAttendances(todayAttendances);const userTodayAttendances=todayAttendances.filter(a=>a.user_id==userId);setUserAttendances(userTodayAttendances);}catch(error){setMessage('Erro ao atualizar check-ins');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl mb-4\",children:\"Check-ins do Dia\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl mb-2\",children:\"Meus Check-ins\"}),userAttendances.length===0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Nenhum check-in registrado ainda.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckIn,className:\"bg-blue-500 text-white p-2 rounded\",children:\"Registrar Check-in\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"mb-6\",children:userAttendances.map(att=>/*#__PURE__*/_jsxs(\"li\",{className:\"bg-blue-100 p-4 mb-2 rounded shadow flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Check-in: \",att.check_in,\" - Check-out: \",att.check_out||'Pendente',\" - Horas: \",att.hours_worked||'N/A']}),!att.check_out&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCheckOut(att.id),className:\"bg-red-500 text-white p-2 rounded ml-4\",children:\"Fazer Check-out\"})]},att.id))}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl mb-2\",children:\"Todos os Check-ins do Dia\"}),attendances.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Nenhum check-in hoje.\"}):/*#__PURE__*/_jsx(\"ul\",{children:attendances.map(att=>/*#__PURE__*/_jsxs(\"li\",{className:\"bg-white p-4 mb-2 rounded shadow\",children:[att.user_name,\": Check-in \",att.check_in,\" - Check-out \",att.check_out||'Pendente']},att.id))}),/*#__PURE__*/_jsx(\"p\",{children:message})]});};export default CheckIns;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","CheckIns","attendances","setAttendances","message","setMessage","userAttendances","setUserAttendances","fetchAttendances","userId","localStorage","getItem","response","get","today","Date","toISOString","split","todayAttendances","data","filter","a","check_in","startsWith","userTodayAttendances","user_id","error","handleCheckIn","post","shift_id","refreshAttendances","handleCheckOut","attendanceId","attendance_id","className","children","length","onClick","map","att","check_out","hours_worked","id","user_name"],"sources":["/home/woulschneider/hercruz-presenca/frontend/src/components/CheckIns.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../services/api';\n\nconst CheckIns = () => {\n  const [attendances, setAttendances] = useState([]);\n  const [message, setMessage] = useState('');\n  const [userAttendances, setUserAttendances] = useState([]);\n\n  useEffect(() => {\n    const fetchAttendances = async () => {\n      const userId = localStorage.getItem('user_id');\n      try {\n        const response = await api.get('/attendance');\n        // Show all attendances for today\n        const today = new Date().toISOString().split('T')[0];\n        const todayAttendances = response.data.filter(a => a.check_in && a.check_in.startsWith(today));\n        setAttendances(todayAttendances);\n        const userTodayAttendances = todayAttendances.filter(a => a.user_id == userId);\n        setUserAttendances(userTodayAttendances);\n      } catch (error) {\n        setMessage('Failed to load attendances');\n      }\n    };\n    fetchAttendances();\n  }, []);\n\n  const handleCheckIn = async () => {\n    const userId = localStorage.getItem('user_id');\n    // Assume default shift id 1\n    try {\n      await api.post('/attendance/checkin', { user_id: userId, shift_id: 1 });\n      setMessage('Check-in registrado!');\n      refreshAttendances();\n    } catch (error) {\n      setMessage('Erro ao registrar check-in');\n    }\n  };\n\n  const handleCheckOut = async (attendanceId) => {\n    try {\n      await api.post('/attendance/checkout', { attendance_id: attendanceId });\n      setMessage('Check-out registrado!');\n      refreshAttendances();\n    } catch (error) {\n      setMessage('Erro ao registrar check-out');\n    }\n  };\n\n  const refreshAttendances = async () => {\n    const userId = localStorage.getItem('user_id');\n    try {\n      const response = await api.get('/attendance');\n      const today = new Date().toISOString().split('T')[0];\n      const todayAttendances = response.data.filter(a => a.check_in && a.check_in.startsWith(today));\n      setAttendances(todayAttendances);\n      const userTodayAttendances = todayAttendances.filter(a => a.user_id == userId);\n      setUserAttendances(userTodayAttendances);\n    } catch (error) {\n      setMessage('Erro ao atualizar check-ins');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-6\">\n      <h1 className=\"text-3xl mb-4\">Check-ins do Dia</h1>\n      <h2 className=\"text-xl mb-2\">Meus Check-ins</h2>\n      {userAttendances.length === 0 ? (\n        <div>\n          <p className=\"text-gray-600 mb-4\">Nenhum check-in registrado ainda.</p>\n          <button onClick={handleCheckIn} className=\"bg-blue-500 text-white p-2 rounded\">Registrar Check-in</button>\n        </div>\n      ) : (\n        <ul className=\"mb-6\">\n          {userAttendances.map(att => (\n            <li key={att.id} className=\"bg-blue-100 p-4 mb-2 rounded shadow flex justify-between items-center\">\n              <div>\n                Check-in: {att.check_in} - Check-out: {att.check_out || 'Pendente'} - Horas: {att.hours_worked || 'N/A'}\n              </div>\n              {!att.check_out && (\n                <button onClick={() => handleCheckOut(att.id)} className=\"bg-red-500 text-white p-2 rounded ml-4\">\n                  Fazer Check-out\n                </button>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n      <h2 className=\"text-xl mb-2\">Todos os Check-ins do Dia</h2>\n      {attendances.length === 0 ? (\n        <p className=\"text-gray-600\">Nenhum check-in hoje.</p>\n      ) : (\n        <ul>\n          {attendances.map(att => (\n            <li key={att.id} className=\"bg-white p-4 mb-2 rounded shadow\">\n              {att.user_name}: Check-in {att.check_in} - Check-out {att.check_out || 'Pendente'}\n            </li>\n          ))}\n        </ul>\n      )}\n      <p>{message}</p>\n    </div>\n  );\n};\n\nexport default CheckIns;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}